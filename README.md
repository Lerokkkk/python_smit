# Сервис расчета стоимости страхования

Этот сервис реализует REST API для расчета стоимости страхования в зависимости от типа груза и объявленной стоимости.
Сервис принимает JSON-структуру через API и рассчитывает стоимость страхования.
Все изменения тарифов логируются и отправляются в Kafka для последующей обработки.

## Стек технологий

- **FastAPI** — для разработки REST API.
- **SQLAlchemy ORM** — для работы с базой данных.
- **PostgreSQL** — для хранения данных.
- **Docker** и **Docker Compose** — для контейнеризации сервисов.
- **Kafka** — для логирования изменений через батч-процесс.
- **punq** — для DI.

## Установка и развертывание

1. Клонируйте репозиторий

```git clone https://github.com/Lerokkkk/python_smit.git```

```cd python_smit```

2. Создайте .env файл в папке docker_compose

3. Поднимите приложение, кафку и базу данных в докере
   ### Реализованный команды
   ```make kafka``` - поднять кафку

   ```make storage``` - поднять базу данных

   ```make app``` - поднять приложение (не забудьте поднять кафку и бд перед ним)

   ```make create-table``` - создать таблицу для базы данных

   ```make kafka-down``` - остановить кафку

   ```make app-down``` - остановить приложение

   ```make storage-down``` - остановить базу данных

   ```make all-down``` - остановить всё

